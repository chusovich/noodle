## 1. Store Secrets in GitHub Actions

Go to **GitHub Repo â†’ Settings â†’ Secrets and variables â†’ Actions â†’ Secrets**, then add secrets like:

- `DB_PASSWORD`
- `API_KEY`
- `DOCKER_USERNAME`
- `DOCKER_PASSWORD`

## 2. Inject Secrets into Docker Compose

There are a few ways to pass GitHub Actions secrets to Docker Compose. Below are two common and secure patterns:

 ---

### Option A: Use an `.env` File Generated by GitHub Actions

#### docker-compose.yml

```yaml
services:
  app:
    image: myapp:latest
    env_file:
      - .env.production
```

GitHub Actions Workflow

```yaml
name: Deploy with Docker Compose

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Docker
        uses: docker/setup-buildx-action@v3

      - name: Login to Docker
        run: echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u ${{ secrets.DOCKER_USERNAME }} --password-stdin

      - name: Create env file
        run: |
          echo "DB_PASSWORD=${{ secrets.DB_PASSWORD }}" >> .env.production
          echo "API_KEY=${{ secrets.API_KEY }}" >> .env.production

      - name: Docker Compose Up
        run: docker-compose -f docker-compose.yml up -d
```

> âœ… **Pros:** Easy, secure, avoids hardcoding
> âš ï¸ **Con:** Requires `.env.production` file cleanup or `.gitignore`

---

### Option B: Use `environment` Section in Compose with Secrets Interpolated by GitHub Actions

 docker-compose.yml

```yaml
services:
  app:
    image: myapp:latest
    environment:
      - DB_PASSWORD=${DB_PASSWORD}
      - API_KEY=${API_KEY}
```

#### GitHub Actions Workflow

```yaml
    - name: Docker Compose Up with secrets
      run: |
        DB_PASSWORD=${{ secrets.DB_PASSWORD }} \
        API_KEY=${{ secrets.API_KEY }} \
        docker-compose up -d
```

> âœ… **Pros:** No file written to disk
> âš ï¸ **Con:** Environment variable limits apply (e.g., multiline secrets like private keys might be tricky)

---

ğŸ” Tips for Sensitive Values

- **Multiline secrets (e.g. private keys):** Use `printf` with escaping inside the action if needed.
- **Never commit `.env` files** â€“ always add to `.gitignore`.
